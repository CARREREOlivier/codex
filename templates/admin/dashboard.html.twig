{% extends 'admin/base_admin.html.twig' %}

{% block page_title %}Tableau de bord{% endblock %}

{% block body %}
    <h1 class="text-3xl font-bold mb-10">ğŸ“Š Tableau de bord</h1>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-white mb-10">
        <div class="bg-[#2d2d2d] p-6 rounded-xl shadow-lg">
            <h2 class="text-lg text-gray-300">Articles publiÃ©s</h2>
            <p class="text-4xl font-bold text-accent">{{ articlesPublies }}</p>
        </div>
        <div class="bg-[#2d2d2d] p-6 rounded-xl shadow-lg">
            <h2 class="text-lg text-gray-300">Å’uvres</h2>
            <p class="text-4xl font-bold text-accent">{{ nbOeuvres }}</p>
        </div>
        <div class="bg-[#2d2d2d] p-6 rounded-xl shadow-lg">
            <h2 class="text-lg text-gray-300">Utilisateurs</h2>
            <p class="text-4xl font-bold text-accent">{{ nbUsers }}</p>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- ğŸ” Ã€ SURVEILLER -->
        <div class="bg-[#1f1f1f] p-6 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold mb-4">ğŸ” Ã€ surveiller</h2>

            <ul class="space-y-2 text-sm text-gray-300">
                <li>ğŸ“Œ Brouillons anciens : <strong>{{ brouillonsAnciens|length }}</strong></li>
                <li>ğŸ§© Articles sans Å“uvre : <strong>{{ articlesSansOeuvre|length }}</strong></li>
                <li>ğŸ‘¤ Articles sans auteur : <strong>{{ articlesSansAuteur|length }}</strong></li>
                <li>ğŸ“ Å’uvres sans description : <strong>{{ oeuvresSansDescription|length }}</strong></li>
                <li>âœ‚ï¸ Articles trÃ¨s courts (&lt; 500c) : <strong>{{ articlesTropCourts|length }}</strong></li>
                <li>ğŸ“ Titres dâ€™articles dupliquÃ©s : <strong>{{ articlesDupliques|length }}</strong></li>
            </ul>
        </div>

        <!-- ğŸ§¾ ACTUALITÃ‰S -->
        <div class="bg-[#1f1f1f] p-6 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold mb-4">ğŸ§¾ ActivitÃ© rÃ©cente</h2>

            <h3 class="text-lg font-semibold mt-4 mb-2 text-gray-400">ğŸ“„ Derniers articles</h3>
            <ul class="list-disc list-inside text-sm text-gray-300">
                {% for article in derniersArticles %}
                    <li>{{ article.title }} â€” <em>{{ article.createdAt|date('d/m/Y H:i') }}</em></li>
                {% else %}
                    <li>Aucun article.</li>
                {% endfor %}
            </ul>

            <h3 class="text-lg font-semibold mt-4 mb-2 text-gray-400">ğŸ“š Derniers utilisateurs</h3>
            <ul class="list-disc list-inside text-sm text-gray-300">
                {% for user in derniersUtilisateurs %}
                    <li>{{ user.pseudo ?? user.email }}</li>
                {% else %}
                    <li>Aucun utilisateur rÃ©cent.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}
